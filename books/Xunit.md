# Xunit

### 目标:

 	1. 有助于提高软件质量
     * 正确的软件
     * 软件开发正确
 	2. 有助于理解SUT(system under test): `测试即文档`
 	3. 有助于降低风险
     * 遗留代码(没有单元测试)

### 原则

1. 测试驱动开发(tdd)
2. 可测性设计
3. 测试对外行为
4. 以沟通为目的
5. 每个测试验证一种条件(每个测试一个断言): `Strong的测试`

### 反模式

1. 测试可读性差
2. 一个测试断言过多或没有
3. 测试不能有执行顺序
4. 测试运行慢
5. 依赖特性环境才能运行
6. 搭顺风车(一个测试写两个方法的测试)

### 特点

1. 快速并反复运行(小, 稳定)
2. 易于编写和维护
3. 测试只需要最低限度的维护
4. 先测试后组装

### 常见问题

1. 私有问题不需要测试:	`只需测试公有方法, 因为所有私有方法都会被共有方法调用`
2. 没有返回值的方法怎么测:  `抛出异常` `委托其他类`
3. 静态方法如何mock: `少抽象静态方法, 类`
4. 测试覆盖率高: `只能说明测试分支能测试到, 没太大意义`

### 实践

`dummy object`:

`fake object`:

`test: spy`

`test stub`: 预期的是状态(多用于集成测试, API测试)

`mock object`: 预期的是行为



`assertJ`:

`Jacoco`: 80%的测试覆盖率? `太高了不利于重构`	

